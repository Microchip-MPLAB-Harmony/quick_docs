<!DOCTYPE html> <html lang="en-US"> <head> <meta charset="UTF-8"> <meta http-equiv="X-UA-Compatible" content="IE=Edge"> <title>Create First Harmony 3 Project - Microchip MPLAB Harmony Quick Documentation help</title> <link rel="shortcut icon" href="../../favicon.ico" type="image/x-icon"> <link rel="stylesheet" href="../../assets/css/just-the-docs.css"> <script async src="https://www.googletagmanager.com/gtag/js?id=UA-2724382-16"></script> <script> window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', "UA-2724382-16"); </script> <script type="text/javascript" src="../../assets/js/vendor/lunr.min.js"></script> <script type="text/javascript" src="../../assets/js/just-the-docs.js"></script> <meta name="viewport" content="width=device-width, initial-scale=1"> <!-- Begin Jekyll SEO tag v2.6.1 --> <title>Create First Harmony 3 Project | Microchip MPLAB Harmony Quick Documentation help</title> <meta name="generator" content="Jekyll v3.8.5" /> <meta property="og:title" content="Create First Harmony 3 Project" /> <meta property="og:locale" content="en_US" /> <meta name="description" content="Harmony 3 Quick Documentation package" /> <meta property="og:description" content="Harmony 3 Quick Documentation package" /> <link rel="canonical" href="../../basic/create_first_harmony_3_project/readme.html" /> <meta property="og:url" content="../../basic/create_first_harmony_3_project/readme.html" /> <meta property="og:site_name" content="Microchip MPLAB Harmony Quick Documentation help" /> <script type="application/ld+json"> {"@type":"WebPage","url":"../../basic/create_first_harmony_3_project/readme.html","headline":"Create First Harmony 3 Project","description":"Harmony 3 Quick Documentation package","publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"../../assets/images/vendor/microchip_mplab_harmony_logo_150_transparent.png"}},"@context":"https://schema.org"}</script> <!-- End Jekyll SEO tag --> </head> <body> <svg xmlns="http://www.w3.org/2000/svg" style="display: none;"> <symbol id="link" viewBox="0 0 16 16"> <title>Link</title> <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path> </symbol> </svg> <div class="page-wrap"> <div class="side-bar"> <div class="site-header"> <a href="../../index.html" class="site-title lh-tight"> <div class="site-logo"></div> </a> <button class="menu-button fs-3 js-main-nav-trigger" data-text-toggle="Hide" type="button">Menu</button> </div> <div class="navigation main-nav js-main-nav"> <nav role="navigation" aria-label="Main navigation"> <ul class="navigation-list"><li class="navigation-list-item"><a href="../../index.html" class="navigation-list-link">Harmony 3 Quick Docs</a></li><li class="navigation-list-item"><a href="../../basic/readme.html" class="navigation-list-link">Harmony Basics</a><ul class="navigation-list-child-list "><li class="navigation-list-item "><a href="../../basic/mplab_harmony_3_configurator/readme.html" class="navigation-list-link">MPLAB Harmony 3 Configurator (MHC)</a></li><li class="navigation-list-item "><a href="../../basic/mhc_project_graph/readme.html" class="navigation-list-link">MHC Project Graph</a></li><li class="navigation-list-item "><a href="../../basic/mhc_clock_configuration/readme.html" class="navigation-list-link">MHC Clock Configuration</a></li><li class="navigation-list-item "><a href="../../basic/mhc_pin_configuration/readme.html" class="navigation-list-link">MHC Pin Configuration</a></li><li class="navigation-list-item "><a href="../../basic/mhc_nvic_configuration/readme.html" class="navigation-list-link">MHC NVIC Configuration</a></li><li class="navigation-list-item "><a href="../../basic/mhc_dma_configuration/readme.html" class="navigation-list-link">MHC DMA Configuration</a></li><li class="navigation-list-item "><a href="../../basic/mhc_memory_protection_unit_configuration/readme.html" class="navigation-list-link">MHC Memory Protection Unit Configuration</a></li><li class="navigation-list-item "><a href="../../basic/mhc_code_generation/readme.html" class="navigation-list-link">MHC Code Generation</a></li><li class="navigation-list-item "><a href="../../basic/mhc_window_manager_log_level/readme.html" class="navigation-list-link">MHC Window manager and log level</a></li><li class="navigation-list-item "><a href="../../basic/create_hello_world_sam_mcus/readme.html" class="navigation-list-link">Create Hello World application on SAM MCUs</a></li><li class="navigation-list-item "><a href="../../basic/create_hello_world_pic_mcus/readme.html" class="navigation-list-link">Create Hello World application on PIC MCUs</a></li><li class="navigation-list-item "><a href="../../basic/open_an_existing_harmony_3_project/readme.html" class="navigation-list-link">Open an Existing Harmony 3 Project</a></li><li class="navigation-list-item "><a href="../../basic/harmony_3_packages/readme.html" class="navigation-list-link">Harmony 3 Packages</a></li><li class="navigation-list-item "><a href="../../basic/create_iar_or_keil_project_using_mhc/readme.html" class="navigation-list-link">Create IAR or Keil project using MHC</a></li><li class="navigation-list-item "><a href="../../basic/create_new_trust_zone_project/readme.html" class="navigation-list-link">Create new TrustZone Project</a></li><li class="navigation-list-item "><a href="../../basic/sam_mpus_getting_started_mplabx/readme.html" class="navigation-list-link">Getting started with SAM MPU Devices on MPLAB X Tools</a></li><li class="navigation-list-item "><a href="../../basic/sam_mpus_getting_started_harmony_3/readme.html" class="navigation-list-link">Getting Started with MPLAB Harmony v3 on the SAMA5D2</a></li></ul></li><li class="navigation-list-item"><a href="../../migration/readme.html" class="navigation-list-link">Migration Guides</a><ul class="navigation-list-child-list "><li class="navigation-list-item "><a href="../../migration/differences_harmony_2_to_harmony_3/readme.html" class="navigation-list-link">Differences between Harmony 2 to Harmony 3</a></li><li class="navigation-list-item "><a href="../../migration/harmony_2_to_harmony_3/readme.html" class="navigation-list-link">Harmony 2 to Harmony 3 Guide</a></li><li class="navigation-list-item "><a href="../../migration/aria_graphics_harmoy2_to_harmony_3/readme.html" class="navigation-list-link">Aria Graphis Application Harmony2 to Harmony 3 Guide</a></li><li class="navigation-list-item "><a href="../../migration/tcpiip_harmoy2_to_harmony_3/readme.html" class="navigation-list-link">TCP/IP Application Harmony2 to Harmony 3 Guide</a></li><li class="navigation-list-item "><a href="../../migration/usb_harmoy2_to_harmony_3/readme.html" class="navigation-list-link">TCP/IP Application Harmony2 to Harmony 3 Guide</a></li><li class="navigation-list-item "><a href="../../migration/introduction_mplabx_harmony_3_to_studio_asf_users/readme.html" class="navigation-list-link">Introduction to MPLABX and Harmony 3 to Atmel Studio and ASF Users</a></li><li class="navigation-list-item "><a href="../../migration/asf_to_harmony_3/readme.html" class="navigation-list-link">Porting ASF to Harmony 3</a></li><li class="navigation-list-item "><a href="../../migration/atmel_start_to_harmony_3/readme.html" class="navigation-list-link">Atmel START to MPLAB Harmony 3 Guide</a></li></ul></li><li class="navigation-list-item"><a href="../../peripheral/readme.html" class="navigation-list-link">Peripheral Libraries</a><ul class="navigation-list-child-list "><li class="navigation-list-item "><a href="../../peripheral/samc2x_getting_started/readme.html" class="navigation-list-link">Getting Started with PLIBs on SAMC2x MCUs</a></li><li class="navigation-list-item "><a href="../../peripheral/samd5x_getting_started/readme.html" class="navigation-list-link">Getting Started with PLIBs on SAM D5x/E5x MCUs</a></li><li class="navigation-list-item "><a href="../../peripheral/same70_getting_started/readme.html" class="navigation-list-link">Getting Started with PLIBs on SAM E70/S70/V70/V71 MCUs</a></li><li class="navigation-list-item "><a href="../../peripheral/saml10_getting_started/readme.html" class="navigation-list-link">Getting Started with PLIBs on SAM L10 MCUs</a></li><li class="navigation-list-item "><a href="../../peripheral/samd21_getting_started/readme.html" class="navigation-list-link">Getting Started with PLIBs on SAM D21 MCUs</a></li><li class="navigation-list-item "><a href="../../peripheral/pic32mz_getting_started/readme.html" class="navigation-list-link">Getting Started with PLIBs on PIC32MZ EF MCUs</a></li><li class="navigation-list-item "><a href="../../peripheral/pic32mx_getting_started/readme.html" class="navigation-list-link">Getting Started with PLIBs on PIC32MX 470 MCUs</a></li><li class="navigation-list-item "><a href="../../peripheral/pic32mk_getting_started/readme.html" class="navigation-list-link">Getting Started with PLIBs on PIC32MK GP MCUs</a></li><li class="navigation-list-item "><a href="../../peripheral/samc2x_low_power/readme.html" class="navigation-list-link">Low Power with PLIBs on SAMC2x MCUs</a></li><li class="navigation-list-item "><a href="../../peripheral/saml21_low_power/readme.html" class="navigation-list-link">Low Power with PLIBs on SAM L21 MCUs</a></li><li class="navigation-list-item "><a href="../../peripheral/same70_getting_started_drivers/readme.html" class="navigation-list-link">Getting Started with Drivers on SAM E70/S70/V70/V71 MCUs</a></li><li class="navigation-list-item "><a href="../../peripheral/same70_getting_started_drivers_freertos/readme.html" class="navigation-list-link">Getting Started with Drivers on SAM E70/S70/V70/V71 MCUs using FreeRTOS</a></li></ul></li><li class="navigation-list-item"><a href="../../middleware/readme.html" class="navigation-list-link">Middleware Examples</a><ul class="navigation-list-child-list "><li class="navigation-list-item "><a href="../../middleware/pic32mz_getting_started_middleware/readme.html" class="navigation-list-link">Getting Started with Middleware on PIC32MZ EF MCUs</a></li><li class="navigation-list-item "><a href="../../middleware/harmony_3_audio_overview/readme.html" class="navigation-list-link">MPLAB Harmony 3 Audio Overview</a></li><li class="navigation-list-item "><a href="../../middleware/create_first_audio_application/readme.html" class="navigation-list-link">Create first Audio Application</a></li><li class="navigation-list-item "><a href="../../middleware/create_first_audio_decoder_application/readme.html" class="navigation-list-link">Create first Audio Decoder Application</a></li><li class="navigation-list-item "><a href="../../middleware/sdcard_audio_player_reader_tutorial/readme.html" class="navigation-list-link">SD Card Audio Player Reader Tutorial</a><ul class="navigation-list-child-list"><li class="navigation-list-item "> <a href="../../middleware/sdcard_audio_player_reader_tutorial/audio_tone_using_a_lookup_table/readme.html" class="navigation-list-link">Audio Tone using a lookup table</a> </li><li class="navigation-list-item "> <a href="../../middleware/sdcard_audio_player_reader_tutorial/audio_tone_using_text_file_in_sd_card/readme.html" class="navigation-list-link">Audio Tone using text fil in SD card</a> </li><li class="navigation-list-item "> <a href="../../middleware/sdcard_audio_player_reader_tutorial/sd_card_reader_to_load_audio_files/readme.html" class="navigation-list-link">SD card Reader to load Audio Files</a> </li><li class="navigation-list-item "> <a href="../../middleware/sdcard_audio_player_reader_tutorial/play_wav_audio_file_from_sd_card/readme.html" class="navigation-list-link">Play WAV Audio File from SD Card</a> </li><li class="navigation-list-item "> <a href="../../middleware/sdcard_audio_player_reader_tutorial/display_graphics_to_select_and_play_audio_file/readme.html" class="navigation-list-link">Display Graphics to Select and Play Audio File</a> </li></ul></li><li class="navigation-list-item "><a href="../../middleware/quickstart_prebuilt_graphics_applications/readme.html" class="navigation-list-link">Quickstart Prebuilt Graphics Applications</a></li><li class="navigation-list-item "><a href="../../middleware/creating_a_new_graphics_application/readme.html" class="navigation-list-link">Creating a new Graphics Application</a></li><li class="navigation-list-item "><a href="../../middleware/graphics_quick_start_application_guides/readme.html" class="navigation-list-link">Graphics Quick Start Application Guides</a></li><li class="navigation-list-item "><a href="../../middleware/harmony_graphics_suite_user_guide/readme.html" class="navigation-list-link">Harmony Graphics Suite User Guide</a></li><li class="navigation-list-item "><a href="../../middleware/create_first_usb_device_application/readme.html" class="navigation-list-link">Create first USB device application</a></li><li class="navigation-list-item "><a href="../../middleware/create_first_usb_host_application/readme.html" class="navigation-list-link">Create first USB Host application</a></li><li class="navigation-list-item "><a href="../../middleware/harmony_usb_stack_user_guide/readme.html" class="navigation-list-link">Harmony USB Stack User Guide</a></li><li class="navigation-list-item "><a href="../../middleware/create_first_tcpip_application/readme.html" class="navigation-list-link">Create first TCPIP Application</a></li><li class="navigation-list-item "><a href="../../middleware/harmony_tcpip_user_guide/readme.html" class="navigation-list-link">Harmony TCP/IP User Guide</a></li><li class="navigation-list-item "><a href="../../middleware/create_a_touch_project/readme.html" class="navigation-list-link">Create a Touch Project</a></li><li class="navigation-list-item "><a href="../../middleware/create_touch_surface_gesture_project/readme.html" class="navigation-list-link">Create Touch Surface and Gesture Project</a></li><li class="navigation-list-item "><a href="../../middleware/harmony_qtouch_user_guide/readme.html" class="navigation-list-link">Harmony QTouch User Guide</a></li><li class="navigation-list-item "><a href="../../middleware/harmony_crypto_overview/readme.html" class="navigation-list-link">Harmony Crypto Overview</a></li><li class="navigation-list-item "><a href="../../middleware/create_first_winc_bypass_mode_example/readme.html" class="navigation-list-link">Create Your First WINC Bypass Mode Example</a></li><li class="navigation-list-item "><a href="../../middleware/harmony_winc_driver_architecture/readme.html" class="navigation-list-link">Harmony WINC Driver Architecture</a></li><li class="navigation-list-item "><a href="../../middleware/create_first_bluetooth_application/readme.html" class="navigation-list-link">Create first Bluetooth Application</a></li></ul></li><li class="navigation-list-item"><a href="../../release_notes.html" class="navigation-list-link">Release notes</a></li><li class="navigation-list-item"><a href="../../mplab_harmony_license.html" class="navigation-list-link">License</a></li></ul> </nav> </div> <footer class="site-footer"> <p class="text-small text-grey-dk-000 mb-4">This site uses <a href="https://github.com/pmarsceill/just-the-docs">Just the Docs</a>, a documentation theme for Jekyll.</p> </footer> </div> <div class="main-content-wrap js-main-content" tabindex="0"> <div class="main-content"> <div class="page-header js-page-header"> <div class="search"> <div class="search-input-wrap"> <input type="text" class="js-search-input search-input" tabindex="0" placeholder="THE SEARCH IS NOT OPERATIONAL IN OFFLINE PAGES, instead use CTRL + F" aria-label="Search Microchip MPLAB Harmony Quick Documentation help" autocomplete="off"> <svg width="14" height="14" viewBox="0 0 28 28" xmlns="http://www.w3.org/2000/svg" class="search-icon"><title>Search</title><g fill-rule="nonzero"><path d="M17.332 20.735c-5.537 0-10-4.6-10-10.247 0-5.646 4.463-10.247 10-10.247 5.536 0 10 4.601 10 10.247s-4.464 10.247-10 10.247zm0-4c3.3 0 6-2.783 6-6.247 0-3.463-2.7-6.247-6-6.247s-6 2.784-6 6.247c0 3.464 2.7 6.247 6 6.247z"/><path d="M11.672 13.791L.192 25.271 3.02 28.1 14.5 16.62z"/></g></svg> </div> <div class="js-search-results search-results-wrap"></div> </div> <ul class="list-style-none text-small aux-nav"> <li class="d-inline-block my-0"><a href="https://support.microchip.com">Obtain Support from Microchip</a></li> </ul> </div> <div class="page"> <nav class="breadcrumb-nav"> <ol class="breadcrumb-nav-list"> <li class="breadcrumb-nav-list-item"><a href="">Basic</a></li> <li class="breadcrumb-nav-list-item"><span>Create First Harmony 3 Project</span></li> </ol> </nav> <div id="main-content" class="page-content" role="main"> <p>                                                                                                     <a href="../../index.html"><img src="../../r_images/quick_home.png" title="Home" /></a> <a href="../readme.html"><img src="../../r_images/quick_back.png" title="Back" /></a></p> <h1 id="create-first-mplab-harmony-3-project"> <a href="#create-first-mplab-harmony-3-project" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#link"></use></svg></a> Create First MPLAB Harmony 3 Project </h1> <h2 id="overview"> <a href="#overview" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#link"></use></svg></a> Overview </h2> <p>The purpose of this tutorial is to show you how to use Microchip MPLAB® Harmony 3 to create a simple “heartbeat” LED application that flashes an LED using the MPLAB® X IDE and the MPLAB® Harmony Configurator (MHC). As a bonus, you can reuse the heartbeat LED application in future projects as a simple indicator of system health. This tutorial focuses on direct use of MPLAB® Harmony peripheral libraries to build an application. If you are interested in using interoperable MPLAB® Harmony drivers, services, or middleware in your application, please see “Creating Your First Project – Harmony” when you’ve finished with this tutorial. The application can be defined by the following flowchart:</p> <p><img src="images/flowchart.png" width="300" height="330" align="middle" /></p> <h2 id="required-software"> <a href="#required-software" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#link"></use></svg></a> Required Software </h2> <p>The instructions in this tutorial assume that you have already installed following software.</p> <ul> <li><a href="https://www.microchip.com/mplab/mplab-x-ide" target="_blank">MPLAB X Integrated Development Environment</a></li> <li><a href="https://www.microchip.com/mplab/compilers" target="_blank">MPLAB XC32/32++ C Compiler</a></li> <li><a href="https://github.com/Microchip-MPLAB-Harmony/mhc" target="_blank">MPLAB Harmony Configurator</a></li> </ul> <h2 id="required-hardware"> <a href="#required-hardware" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#link"></use></svg></a> Required Hardware </h2> <p>The instructions in this tutorial use <a href="https://www.microchip.com/developmenttools/ProductDetails/atsamc21n-xpro" target="_blank">SAMC21N Xplained Pro Evaluation Kit</a>and it has one Yellow Color user LED (PC05) connected GPIO. Similar kits will work similarly, but the setup and steps may not be exactly as described.</p> <p><strong>Setup</strong>: The following figure shows the hardware setup details:</p> <ul> <li>Connect SAMC21N Xplained Pro Evaluation Kit micro USB port to PC using a micro USB cable <img src="images/hardware_setup.png" width="470" height="520" align="middle" /></li> </ul> <h2 id="procedure"> <a href="#procedure" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#link"></use></svg></a> Procedure </h2> <p>The following are the steps to create, generate, build and flash LED Blinking application. Before proceeding, make sure you have downloaded the required Harmony 3 packages (for directions, the MPLAB® Harmony Configurator (MHC) User’s Guide) and setup the required hardware as shown previously.</p> <h2 id="create-a-new-project"> <a href="#create-a-new-project" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#link"></use></svg></a> Create a new project </h2> <ol> <li>Open the MPLAB® X IDE.</li> <li>Create a New Project by clicking the New Project icon <img src="images/btn_new_project.png" /> or by selecting File &gt; New Project.</li> <li>In the New Project window select 32-Bit MPLAB® Harmony 3 Project.</li> <li>Click Next.<br /> <img src="images/new_project_step1.png" width="700" height="500" align="middle" /> <strong>Note</strong>: If 32-Bit MPLAB® Harmony 3 Project is not displayed, please download and install the MPLAB® Harmony 3 Configurator before continuing with these steps.</li> <li>Enter the path to the folder in which you downloaded the MPLAB® Harmony 3 packages in the Framework Path edit box. <img src="images/new_project_step2.png" width="700" height="500" align="middle" /></li> <li>In the Project Setting dialog window, fill in or select the information needed as follows: <ul> <li>Location: Create a “<strong>MyBlinky</strong>” folder in the location of your choice.</li> <li>Folder: Project Folder name i.e. “<strong>sam_c21n_xpro</strong>”</li> <li>Name: Project Name i.e. “<strong>my_blinky_sam_c21n_xpro</strong>”<br /> <img src="images/new_project_step3.png" width="750" height="550" align="middle" /></li> </ul> </li> <li>In the Configuration Settings dialog window, enter the configuration name as “<strong>sam_c21n_xpro</strong>” and select the Target Device <strong>ATSAMC21N18A</strong> from the drop-down menu as shown below.<br /> <img src="images/new_project_step4.png" width="750" height="550" align="middle" /></li> <li>Click <strong>Finish</strong>.</li> <li>When the Configuration Database Setup dialog appears, just click Launch as shown below to open MPLAB® Harmony Configurator plugin. If the below dialog window doesn’t appear then MHC can be launched by selecting MPLAB® Harmony 3 Configurator under Tools ? Embedded. <img src="images/new_project_step5.png" width="750" height="185" align="middle" /></li> </ol> <h2 id="setup-mplab-harmony-project-configurator-to-generate-code"> <a href="#setup-mplab-harmony-project-configurator-to-generate-code" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#link"></use></svg></a> Setup MPLAB® Harmony Project Configurator to Generate Code </h2> <ol> <li> <p>From the “<strong>Available Components</strong>” panel of MHC (on the left side of the MHC window), drag and drop the TC0 peripheral into the Components Graph: <img src="images/setup_step1.png" width="645" height="450" align="middle" /></p> </li> <li>Click on the “<strong>TC0</strong>” component and configure as below and in the figure: <ul> <li>Select Prescaler value to “<strong>Prescaler: GCLK_TC/1024</strong>”</li> <li>Set Timer Period (Milli Sec) to “<strong>500</strong>” <img src="images/setup_step2.png" width="645" height="450" align="middle" /> This will toggle the LED every 0.5 seconds, producing a LED blink every second.</li> </ul> </li> <li>Launch the Pin Configuration manager from the MHC’s Tools menu: <img src="images/setup_step3.png" width="385" height="360" align="middle" /></li> <li> <p>Setup pin “<strong>PC05</strong>” as the board’s <strong>LED</strong>, set custom name as “LED” and Direction as “<strong>Out</strong>”: <img src="images/setup_step4.png" width="900" height="316" align="middle" /> This is necessary because the project doesn’t use a Board Support Package (BSP).</p> </li> <li> <p>Generate the application’s code for the first time.</p> </li> <li> <p>Select the Generate Code button of MHC’s window <img src="images/btn_generate.png" /></p> </li> <li> <p>Save the project’s configuration (any name will do for the .xml file): <img src="images/setup_step5.png" width="595" height="120" align="middle" /> <img src="images/setup_step6.png" width="600" height="440" align="middle" /></p> </li> <li> <p>Select default as the Merge Strategy (i.e. USER_ALL) and click Generate<br /> <img src="images/setup_step7.png" width="600" height="440" align="middle" /><br /> Now the project’s initial software has been configured.<br /> <strong>Note</strong>: Here is a brief explanation of the different merge strategies that are available:<br /> <strong>ALL</strong>: The user will be prompted with a merge window for all generated files. This includes files that have no user modifications but are changed because of changes in MHC configuration or component updates. (This choice is always the safest.)<br /> <strong>USER_ALL</strong>: The user will always be prompted with a merge window for all generated files that contain user modifications.<br /> <strong>USER_RECENT</strong>: The user will be prompted with a merge window for all generated files that contain user modifications.<br /> <strong>OVERWRITE</strong>: All generated file content will be replaced by the contents of this generate operation. All user changes will be overwritten.</p> </li> <li>Let’s examine the software just created in the Projects panel of MPLAB® X IDE Header Files are shown on the top and Source Files are shown on the bottom. Note: the icons used in this picture of the project’s organization make it seem like the files of the project are organized this way on disk. In fact, this is a virtual organization of these files, not an actual one. On disk, the source and header files are not separated. The following table describes the Header and Source files generated from the sample project:</li> </ol> <div class="table-wrapper"><table> <thead> <tr> <th>#</th> <th>Source File</th> <th>Descriptions</th> </tr> </thead> <tbody> <tr> <td>1</td> <td>definitions.h</td> <td>Provides configuration-specific definitions</td> </tr> <tr> <td>2</td> <td>exceptions.c</td> <td>Implements exception handlers</td> </tr> <tr> <td>3</td> <td>initialization.c</td> <td>Implements SYS_Initialize to initializes all libraries and applications</td> </tr> <tr> <td>4</td> <td>interrupts.c</td> <td>Implements the interrupt vectors</td> </tr> <tr> <td>5</td> <td>peripheral [libraries]</td> <td>Implements peripheral libraries used by the project</td> </tr> <tr> <td>6</td> <td>startup.c</td> <td>Startup code for the application</td> </tr> </tbody> </table></div> <p>If you click on the Files tab you will see the actual organization of these files on your drive: <img src="images/setup_step7.png" width="310" height="480" align="middle" /></p> <h2 id="adding-code-to-mainc"> <a href="#adding-code-to-mainc" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#link"></use></svg></a> Adding Code to main.c </h2> <p>Double click on main.c to bring up an editor window and update it to obtain the following code:</p> <div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#include "definitions.h" // SYS function prototypes
</span>
<span class="k">static</span> <span class="n">bool</span> <span class="k">volatile</span> <span class="n">bToggleLED</span> <span class="o">=</span> <span class="nb">false</span><span class="p">;</span>

<span class="c1">// This function is called after period expires</span>
<span class="kt">void</span> <span class="nf">TC0_CH0_TimerInterruptHandler</span><span class="p">(</span><span class="n">TC_TIMER_STATUS</span> <span class="n">status</span><span class="p">,</span> <span class="kt">uintptr_t</span> <span class="n">context</span><span class="p">)</span>
<span class="p">{</span>
    <span class="n">bToggleLED</span> <span class="o">=</span> <span class="nb">true</span><span class="p">;</span>
<span class="p">}</span>

<span class="c1">// *****************************************************************************</span>
<span class="c1">// *****************************************************************************</span>
<span class="c1">// Section: Main Entry Point</span>
<span class="c1">// *****************************************************************************</span>
<span class="c1">// *****************************************************************************</span>

<span class="kt">int</span> <span class="nf">main</span> <span class="p">(</span> <span class="kt">void</span> <span class="p">)</span>
<span class="p">{</span>
    <span class="c1">// Initialize all modules</span>
    <span class="n">SYS_Initialize</span><span class="p">(</span><span class="nb">NULL</span><span class="p">);</span>

    <span class="c1">// Register callback function for CH0 period interrupt</span>
    <span class="n">TC0_TimerCallbackRegister</span><span class="p">(</span><span class="n">TC0_CH0_TimerInterruptHandler</span><span class="p">,</span> <span class="p">(</span><span class="kt">uintptr_t</span><span class="p">)</span><span class="nb">NULL</span><span class="p">);</span>

    <span class="c1">// Start the timer channel 0</span>
    <span class="n">TC0_TimerStart</span><span class="p">();</span>

    <span class="k">while</span> <span class="p">(</span> <span class="nb">true</span> <span class="p">)</span>
    <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span> <span class="n">bToggleLED</span> <span class="p">)</span>
        <span class="p">{</span>
            <span class="n">bToggleLED</span> <span class="o">=</span> <span class="nb">false</span><span class="p">;</span>
            <span class="n">LED_Toggle</span><span class="p">();</span>
        <span class="p">}</span>
    <span class="p">}</span>

    <span class="c1">// Execution should not come here during normal operation</span>
    <span class="k">return</span> <span class="n">EXIT_FAILURE</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div> <p>If you do a control click on “LED_Toggle()” the editor will bring up where this token is defined in the file plib_port.h:</p> <p><img src="images/code1.png" width="700" height="150" align="middle" /></p> <p><img src="images/code2.png" width="700" height="150" align="middle" /></p> <h2 id="upload-project-to-samc21n-xplained-pro-evaluation-kit"> <a href="#upload-project-to-samc21n-xplained-pro-evaluation-kit" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#link"></use></svg></a> Upload project to SAMC21N Xplained pro Evaluation Kit </h2> <ol> <li> <p>Do a right mouse click on the project’s name and bring up the Project Properties dialog:<br /> <img src="images/upload1.png" width="347" height="307" align="middle" /></p> </li> <li> <p>Under Categories section, select Conf: (sam_c21n_xpro), and in the Configuration section, select the hardware tool and XC32 Compiler toolchain (here v2.41). Click Apply, and then click OK<br /> <img src="images/upload2.png" width="800" height="500" align="middle" /></p> </li> <li> <p>Build and run the project: The board’s LED should flash with a 1 second period<br /> <img src="images/upload3.png" width="170" height="70" align="middle" /></p> </li> </ol> <p>We have now implemented a heartbeat for future applications. The LED blinking indicates that the application hasn’t frozen or isn’t stuck in a while(1){} loop (e.g.: assert or exception).</p> <h2 id="result"> <a href="#result" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#link"></use></svg></a> Result </h2> <p>If configured correctly, the LED PC05 on the <a href="https://www.microchip.com/developmenttools/ProductDetails/atsamc21n-xpro" target="_blank">SAMC21N Xplained Pro Evaluation Kit</a> should now flash ON/OFF at <strong>500 ms</strong> intervals.</p> <h2 id="note"> <a href="#note" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#link"></use></svg></a> Note </h2> <p><span style="color:blue"> <em>This page has been verified with the following versions of software tools:</em></span></p> <ul> <li><a href="https://github.com/Microchip-MPLAB-Harmony/csp/releases/tag/v3.7.1">MPLAB Harmony v3 “csp” repo v3.7.1</a></li> <li><a href="https://github.com/Microchip-MPLAB-Harmony/dev_packs/releases/tag/v3.7.0">MPLAB Harmony v3 “dev_packs” repo v3.7.0</a></li> <li><a href="https://github.com/Microchip-MPLAB-Harmony/mhc/releases/tag/v3.4.0">MPLAB Harmony v3 “mhc” repo v3.4.0</a></li> <li>MPLAB Harmony Configurator Plugin v3.5.0</li> <li><a href="https://www.microchip.com/mplab/mplab-x-ide">MPLAB X IDE v5.40</a></li> <li><a href="https://www.microchip.com/mplab/compilers">MPLAB XC32 Compiler v2.41</a></li> </ul> <p><span style="color:blue"> Because Microchip regularly update tools, occasionally there could be minor differences with the newer versions of the tools. </span></p> <h2 id="references"> <a href="#references" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#link"></use></svg></a> References </h2> <ul> <li><a href="https://www.microchip.com/developmenttools/ProductDetails/atsamc21n-xpro" target="_blank">SAMC21N Xplained Pro Evaluation Kit User Guide and Datasheet</a></li> <li><a href="https://www.microchip.com/mplab/mplab-x-ide" target="_blank">MPLAB X IDE User’s Guide</a> see Documentation section at bottom of the page. <ul> <li><a href="http://www.microchip.com/mymicrochip/filehandler.aspx?ddocname=en556757" target="_blank">User’s Guide direct download</a></li> </ul> </li> </ul> <h2 id="reference-links"> <a href="#reference-links" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#link"></use></svg></a> Reference Links </h2> <p><a href=""><a href="https://www.microchip.com/design-centers/32-bit" target="_blank"> <img src="../../r_images/32_bit_mcus.png" /> </a></a>       <a href=""><a href="https://www.microchip.com/design-centers/32-bit-mpus" target="_blank"> <img src="../../r_images/32_bit_mpus.png" /> </a></a>       <a href=""><a href="https://www.microchip.com/mplab/mplab-x-ide" target="_blank"> <img src="../../r_images/mplab_x_ide.png" /> </a></a>     <a href=""><a href="https://www.microchip.com/mplab/mplab-harmony" target="_blank"> <img src="../../r_images/mplab_harmony.png" /> </a></a> <a href=""><a href="https://www.microchip.com/mplab/compilers" target="_blank"> <img src="../../r_images/mplab_compiler.png" /> </a></a></p> <hr> <footer role="contentinfo"> <p class="text-small text-grey-dk-000 mb-0"><img src='../../assets/images/vendor/microchip_logo.png' /><br /> Copyright &copy; 2020 Microchip Technology.</p> </footer> </div> </div> </div> </div> </body> </html>
