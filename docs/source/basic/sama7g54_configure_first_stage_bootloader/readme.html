<!DOCTYPE html> <html lang="en-US"> <head> <meta charset="UTF-8"> <meta http-equiv="X-UA-Compatible" content="IE=Edge"> <link rel="shortcut icon" href="../../../favicon.ico" type="image/x-icon"> <link rel="stylesheet" href="../../../assets/css/just-the-docs-default.css"> <script async src="https://www.googletagmanager.com/gtag/js?id=UA-2724382-16"></script> <script> window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'UA-2724382-16'); </script> <script type="text/javascript" src="../../../assets/js/vendor/lunr.min.js"></script> <script type="text/javascript" src="../../../assets/js/just-the-docs.js"></script> <meta name="viewport" content="width=device-width, initial-scale=1"> <!-- Begin Jekyll SEO tag v2.8.0 --> <title>SAMA7G54 Configure First Stage Bootloader | Microchip MPLAB Harmony Quick Documentation help</title> <meta name="generator" content="Jekyll v3.9.5" /> <meta property="og:title" content="SAMA7G54 Configure First Stage Bootloader" /> <meta property="og:locale" content="en_US" /> <meta name="description" content="Harmony 3 Quick Documentation package" /> <meta property="og:description" content="Harmony 3 Quick Documentation package" /> <link rel="canonical" href="../../../source/basic/sama7g54_configure_first_stage_bootloader/readme.html" /> <meta property="og:url" content="../../../source/basic/sama7g54_configure_first_stage_bootloader/readme.html" /> <meta property="og:site_name" content="Microchip MPLAB Harmony Quick Documentation help" /> <meta property="og:type" content="website" /> <meta name="twitter:card" content="summary" /> <meta property="twitter:title" content="SAMA7G54 Configure First Stage Bootloader" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"WebPage","description":"Harmony 3 Quick Documentation package","headline":"SAMA7G54 Configure First Stage Bootloader","publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"../../assets/images/vendor/microchip_mplab_harmony_logo_150_transparent.png"}},"url":"../../../source/basic/sama7g54_configure_first_stage_bootloader/readme.html"}</script> <!-- End Jekyll SEO tag --> </head> <body> <svg xmlns="http://www.w3.org/2000/svg" style="display: none;"> <symbol id="svg-link" viewBox="0 0 24 24"> <title>Link</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link"> <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path> </svg> </symbol> <symbol id="svg-search" viewBox="0 0 24 24"> <title>Search</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-search"> <circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line> </svg> </symbol> <symbol id="svg-menu" viewBox="0 0 24 24"> <title>Menu</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"> <line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line> </svg> </symbol> <symbol id="svg-arrow-right" viewBox="0 0 24 24"> <title>Expand</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-right"> <polyline points="9 18 15 12 9 6"></polyline> </svg> </symbol> <symbol id="svg-doc" viewBox="0 0 24 24"> <title>Document</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file"> <path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path><polyline points="13 2 13 9 20 9"></polyline> </svg> </symbol> </svg> <div class="side-bar"> <div class="site-header"> <a href="../../../index.html" class="site-title lh-tight"> <div class="site-logo"></div> </a> <a href="#" id="menu-button" class="site-button"> <svg viewBox="0 0 24 24" class="icon"><use xlink:href="#svg-menu"></use></svg> </a> </div> <nav role="navigation" aria-label="Main" id="site-nav" class="site-nav"> <ul class="nav-list"><li class="nav-list-item"><a href="../../../index.html" class="nav-list-link">Harmony 3 Quick Docs</a></li><li class="nav-list-item active"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="../../../source/basic/readme.html" class="nav-list-link">Harmony Basics</a><ul class="nav-list "><li class="nav-list-item "><a href="../../../source/basic/mplab_harmony_3_code_configurator/readme.html" class="nav-list-link">MPLAB Code Configurator (MCC) for Harmony 3 Projects</a></li><li class="nav-list-item "><a href="../../../source/basic/mcc_overview_with_harmony_3/readme.html" class="nav-list-link">MPLAB Code Configurator Overview with MPLAB Harmony Content</a></li><li class="nav-list-item "><a href="../../../source/basic/mcc_project_graph/readme.html" class="nav-list-link">MCC Project Graph</a></li><li class="nav-list-item "><a href="../../../source/basic/mcc_clock_configuration/readme.html" class="nav-list-link">MCC Clock Configuration</a></li><li class="nav-list-item "><a href="../../../source/basic/mcc_pin_configuration/readme.html" class="nav-list-link">MCC Pin Configuration</a></li><li class="nav-list-item "><a href="../../../source/basic/mcc_nvic_configuration/readme.html" class="nav-list-link">MCC NVIC Configuration</a></li><li class="nav-list-item "><a href="../../../source/basic/mcc_dma_configuration/readme.html" class="nav-list-link">MHC DMA Configuration</a></li><li class="nav-list-item "><a href="../../../source/basic/mcc_memory_protection_unit_configuration/readme.html" class="nav-list-link">MCC Memory Protection Unit Configuration</a></li><li class="nav-list-item "><a href="../../../source/basic/mcc_code_generation/readme.html" class="nav-list-link">MCC Code Generation</a></li><li class="nav-list-item "><a href="../../../source/basic/mcc_plugin_configurations/readme.html" class="nav-list-link">MPLAB Code Configurator Options</a></li><li class="nav-list-item "><a href="../../../source/basic/create_first_harmony_3_project/readme.html" class="nav-list-link">Create First Harmony 3 Project</a></li><li class="nav-list-item "><a href="../../../source/basic/create_hello_world_sam_mcus/readme.html" class="nav-list-link">Create Hello World application on SAM MCUs</a></li><li class="nav-list-item "><a href="../../../source/basic/create_first_harmony_3_project_pic32cm_jh01/readme.html" class="nav-list-link">Create a first application on PIC32CM JH01 Microcontrollers using MPLAB Harmony v3 with using MCC</a></li><li class="nav-list-item "><a href="../../../source/basic/create_hello_world_pic_mcus/readme.html" class="nav-list-link">Create Hello World application on PIC MCUs</a></li><li class="nav-list-item "><a href="../../../source/basic/sam9x60_configure_second_stage_bootloader/readme.html" class="nav-list-link">Configure the second stage bootloader for SAM9X60 based MPUs</a></li><li class="nav-list-item "><a href="../../../source/basic/sama7g54_configure_second_stage_bootloader/readme.html" class="nav-list-link">Configure the second stage bootloader for SAMA7G54 based MPUs</a></li><li class="nav-list-item "><a href="../../../source/basic/sama7g54_samba_installation_setup/readme.html" class="nav-list-link">SAMBA installation and setup for SAMA7G54 EK</a></li><li class="nav-list-item "><a href="../../../source/basic/configure_at91bootstrap_to_enable_qspi_xip_mpus/readme.html" class="nav-list-link">Configure at91bootstrap Second Stage Bootloader to enable QSPI XIP on MPUs</a></li><li class="nav-list-item "><a href="../../../source/basic/create_first_harmony_3_project_pic32cm_lsx/readme.html" class="nav-list-link">Create a first application on PIC32CM LSx Microcontrollers using MPLAB Harmony v3 with using MCC</a></li><li class="nav-list-item "><a href="../../../source/basic/create_first_harmony_3_project_pic32cx_sg/readme.html" class="nav-list-link">Create a first application on PIC32CX SG Microcontrollers using MPLAB Harmony v3 with using MCC</a></li><li class="nav-list-item "><a href="../../../source/basic/create_new_trust_zone_project/readme.html" class="nav-list-link">Create new TrustZone Project</a></li><li class="nav-list-item "><a href="../../../source/basic/create_iar_or_keil_project_using_mcc/readme.html" class="nav-list-link">Create IAR or Keil project using MCC</a></li><li class="nav-list-item "><a href="../../../source/basic/create_first_harmony_3_project_pic32cz_cax/readme.html" class="nav-list-link">Create a first application on PIC32CZ CAx Microcontrollers using MPLAB Harmony v3 with using MCC</a></li><li class="nav-list-item "><a href="../../../source/basic/sam9x60_flash_boot_application_using_samba/readme.html" class="nav-list-link">SAM9X60 Flash boot and harmony application binaries using SAMBA</a></li><li class="nav-list-item "><a href="../../../source/basic/sam9x60_getting_started_application_using_mcc/readme.html" class="nav-list-link">Getting started with SAM9X60 Curiosity Development Board using MPLAB Harmony 3</a></li><li class="nav-list-item "><a href="../../../source/basic/sam9x60_qspi_xip_application_using_mcc/readme.html" class="nav-list-link"></a></li><li class="nav-list-item "><a href="../../../source/basic/sam9x60_configure_first_stage_bootloader/readme.html" class="nav-list-link">SAM9X60 Configure First Stage Bootloader</a></li><li class="nav-list-item "><a href="../../../source/basic/sama7g54_flash_boot_application_using_samba/readme.html" class="nav-list-link">SAMA7G54 Flash boot and harmony application binaries using SAM BA</a></li><li class="nav-list-item active"><a href="../../../source/basic/sama7g54_configure_first_stage_bootloader/readme.html" class="nav-list-link active">SAMA7G54 Configure First Stage Bootloader</a></li><li class="nav-list-item "><a href="../../../source/basic/harmony_sync_async_drivers/readme.html" class="nav-list-link">Differences Between Synchronous and Asynchronous Drivers</a></li><li class="nav-list-item "><a href="../../../source/basic/harmony_drivers_plibs/readme.html" class="nav-list-link">Difference Between MPLAB Harmony v3 PLIBs and Drivers</a></li><li class="nav-list-item "><a href="../../../source/basic/harmony_sync_drivers_freertos/readme.html" class="nav-list-link">Synchronous drivers and their usage in FreeRTOS based applications</a></li><li class="nav-list-item "><a href="../../../source/basic/add_new_configuration_to_harmony_3_project/readme.html" class="nav-list-link">Add a New Configuration to an Existing MPLAB Harmony v3 Project</a></li><li class="nav-list-item "><a href="../../../source/basic/create_new_harmony_3_project_using_mcc/readme.html" class="nav-list-link">Create a new MPLAB Harmony v3 project using MCC</a></li><li class="nav-list-item "><a href="../../../source/basic/harmony_3_project_manifest/readme.html" class="nav-list-link">MPLAB Harmony v3 Project Manifest Feature</a></li><li class="nav-list-item "><a href="../../../source/basic/update_mhc_harmony_3_project_to_mcc/readme.html" class="nav-list-link">Update and Configure an Existing MHC-based MPLAB Harmony v3 Project to MCC-based Project</a></li></ul></li><li class="nav-list-item"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="../../../source/migration/readme.html" class="nav-list-link">Migration Guides</a><ul class="nav-list "><li class="nav-list-item "><a href="../../../source/migration/differences_harmony_2_to_harmony_3/readme.html" class="nav-list-link">Differences between Harmony 2 to Harmony 3</a></li><li class="nav-list-item "><a href="../../../source/migration/harmony_2_to_harmony_3/readme.html" class="nav-list-link">Harmony 2 to Harmony 3 Guide</a></li><li class="nav-list-item "><a href="../../../source/migration/aria_graphics_harmoy2_to_harmony_3/readme.html" class="nav-list-link">Aria Graphis Application Harmony2 to Harmony 3 Guide</a></li><li class="nav-list-item "><a href="../../../source/migration/tcpiip_harmoy2_to_harmony_3/readme.html" class="nav-list-link">TCP/IP Application Harmony2 to Harmony 3 Guide</a></li><li class="nav-list-item "><a href="../../../source/migration/usb_harmoy2_to_harmony_3/readme.html" class="nav-list-link">TCP/IP Application Harmony2 to Harmony 3 Guide</a></li><li class="nav-list-item "><a href="../../../source/migration/sam9x60_ek_to_sam9x60_curiosity_harmony/readme.html" class="nav-list-link">Migrating a MPLAB Harmony 3 Application from the SAM9X60 EK to SAM9X60 Curiosity</a></li><li class="nav-list-item "><a href="../../../source/migration/introduction_mplabx_harmony_3_to_studio_asf_users/readme.html" class="nav-list-link">Introduction to MPLABX and Harmony 3 to Atmel Studio and ASF Users</a></li><li class="nav-list-item "><a href="../../../source/migration/asf_to_harmony_3/readme.html" class="nav-list-link">Porting ASF to Harmony 3</a></li><li class="nav-list-item "><a href="../../../source/migration/atmel_start_to_harmony_3/readme.html" class="nav-list-link">Atmel START to MPLAB Harmony 3 Guide</a></li><li class="nav-list-item "><a href="../../../source/migration/pic18f_to_samd21_migration/readme.html" class="nav-list-link">Application migration from 8 bit PIC18F to 32 bit SAM D21</a></li><li class="nav-list-item "><a href="../../../source/migration/atmega4809_to_samd21_migration/readme.html" class="nav-list-link">Application migration from 8 bit AVR to 32 bit SAM D21</a></li><li class="nav-list-item "><a href="../../../source/migration/code_generation_api_migration_from_mcc/readme.html" class="nav-list-link">Application migration from 8 bit AVR to 32 bit SAM D21</a></li><li class="nav-list-item "><a href="../../../source/migration/build_harmony_3_project_with_gcc/readme.html" class="nav-list-link">Build MPLAB Harmony v3 project with ARM GCC toolchain in MPLAB X IDE</a></li><li class="nav-list-item "><a href="../../../source/migration/samc21_asf_to_pic32cmmc_harmony/readme.html" class="nav-list-link">Migrating ASF SAM C21 Application to MPLAB Harmony v3 PIC32CM MC</a></li><li class="nav-list-item "><a href="../../../source/migration/mplab_harmony_v3_project_migration/readme.html" class="nav-list-link">MPLAB Harmony v3 Project Migration</a></li></ul></li><li class="nav-list-item"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="../../../source/peripheral/readme.html" class="nav-list-link">Peripheral Libraries</a><ul class="nav-list "><li class="nav-list-item "><a href="../../../source/peripheral/arm_trustzone_pic32ck_sg01_getting_started/readme.html" class="nav-list-link">Arm TrustZone Getting Started Application on PIC32CK SG01 MCU</a></li><li class="nav-list-item "><a href="../../../source/peripheral/samc2x_getting_started/readme.html" class="nav-list-link">Getting Started with PLIBs on SAMC2x MCUs</a></li><li class="nav-list-item "><a href="../../../source/peripheral/samd5x_getting_started/readme.html" class="nav-list-link">Getting Started with PLIBs on SAM D5x/E5x MCUs</a></li><li class="nav-list-item "><a href="../../../source/peripheral/pic32cm_le00_low_power/readme.html" class="nav-list-link">Low Power with PLIBs on PIC32CM LE00 MCU</a></li><li class="nav-list-item "><a href="../../../source/peripheral/same70_getting_started/readme.html" class="nav-list-link">Getting Started with PLIBs on SAM E70/S70/V70/V71 MCUs</a></li><li class="nav-list-item "><a href="../../../source/peripheral/saml10_getting_started/readme.html" class="nav-list-link">Getting Started with PLIBs on SAM L10 MCUs</a></li><li class="nav-list-item "><a href="../../../source/peripheral/samd21_getting_started/readme.html" class="nav-list-link">Getting Started with PLIBs on SAM D21 MCUs</a></li><li class="nav-list-item "><a href="../../../source/peripheral/pic32mz_getting_started/readme.html" class="nav-list-link">Getting Started with PLIBs on PIC32MZ EF MCUs</a></li><li class="nav-list-item "><a href="../../../source/peripheral/sam9x60_getting_started/readme.html" class="nav-list-link">Getting Started with PLIBs on SAM9X60 MPUs</a></li><li class="nav-list-item "><a href="../../../source/peripheral/sama5d29_getting_started/readme.html" class="nav-list-link">Getting Started with PLIBs on SAMA5D29 MPUs</a></li><li class="nav-list-item "><a href="../../../source/peripheral/sama7g54_getting_started/readme.html" class="nav-list-link">Getting Started with PLIBs on SAMA7G54 MPUs</a></li><li class="nav-list-item "><a href="../../../source/peripheral/pic32mx_getting_started/readme.html" class="nav-list-link">Getting Started with PLIBs on PIC32MX 470 MCUs</a></li><li class="nav-list-item "><a href="../../../source/peripheral/pic32mk_getting_started/readme.html" class="nav-list-link">Getting Started with PLIBs on PIC32MK GP MCUs</a></li><li class="nav-list-item "><a href="../../../source/peripheral/samc2x_low_power/readme.html" class="nav-list-link">Low Power with PLIBs on SAMC2x MCUs</a></li><li class="nav-list-item "><a href="../../../source/peripheral/saml21_low_power/readme.html" class="nav-list-link">Low Power with PLIBs on SAM L21 MCUs</a></li><li class="nav-list-item "><a href="../../../source/peripheral/saml10_low_power/readme.html" class="nav-list-link">Low Power with PLIBs on SAM L10 MCUs</a></li><li class="nav-list-item "><a href="../../../source/peripheral/same54_low_power/readme.html" class="nav-list-link">Low Power with PLIBs on SAM E54 MCU</a></li><li class="nav-list-item "><a href="../../../source/peripheral/arm_trustzone_saml11_getting_started/readme.html" class="nav-list-link">Arm TrustZone Getting Started Application on SAM L11 MCUs</a></li><li class="nav-list-item "><a href="../../../source/peripheral/same70_getting_started_drivers/readme.html" class="nav-list-link">Getting Started with Drivers on SAM E70/S70/V70/V71 MCUs</a></li><li class="nav-list-item "><a href="../../../source/peripheral/samd21_low_power/readme.html" class="nav-list-link">Low Power with PLIBs on SAMD21 MCUs</a></li><li class="nav-list-item "><a href="../../../source/peripheral/same70_getting_started_drivers_freertos/readme.html" class="nav-list-link">Getting Started with Drivers on SAM E70/S70/V70/V71 MCUs using FreeRTOS</a></li><li class="nav-list-item "><a href="../../../source/peripheral/samd21_getting_started_drivers_freertos/readme.html" class="nav-list-link">Getting Started with Drivers on SAM D21 MCUs Using FreeRTOS</a></li><li class="nav-list-item "><a href="../../../source/peripheral/same5x_getting_started_drivers_freertos/readme.html" class="nav-list-link">Getting Started with Drivers on SAM E5x MCUs Using FreeRTOS</a></li><li class="nav-list-item "><a href="../../../source/peripheral/samc2x_getting_started_drivers_freertos/readme.html" class="nav-list-link">Getting Started with Drivers on SAM C2x MCUs Using FreeRTOS</a></li></ul></li><li class="nav-list-item"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="../../../source/middleware/readme.html" class="nav-list-link">Middleware Examples</a><ul class="nav-list "><li class="nav-list-item "><a href="../../../source/middleware/pic32mz_getting_started_middleware/readme.html" class="nav-list-link">Getting Started with Middleware on PIC32MZ EF MCUs</a></li><li class="nav-list-item "><a href="../../../source/middleware/same70_getting_started_middleware/readme.html" class="nav-list-link">Getting Started with USB on SAM MCUs Using MPLAB Harmony v3</a></li><li class="nav-list-item "><a href="../../../source/middleware/rapid_prototyping/readme.html" class="nav-list-link">Rapid Prototyping with Curiosity Nano Using MPLAB Harmony v3</a></li><li class="nav-list-item "><a href="../../../source/middleware/digit_recognition_ai_ml/readme.html" class="nav-list-link">Digit Recognition AI/ML Application on SAM E51 IGAT CURIOSITY EVALUATION KIT Using MPLAB Harmony v3</a></li><li class="nav-list-item "><a href="../../../source/middleware/harmony_3_audio_overview/readme.html" class="nav-list-link">MPLAB Harmony 3 Audio Overview</a></li><li class="nav-list-item "><a href="../../../source/middleware/create_first_audio_application/readme.html" class="nav-list-link">Create first Audio Application</a></li><li class="nav-list-item "><a href="../../../source/middleware/web_photo_frame/readme.html" class="nav-list-link">Getting Started with MPLAB® Harmony v3 to Create a Web-Enabled Digital Photo Frame</a></li><li class="nav-list-item "><a href="../../../source/middleware/create_first_audio_decoder_application/readme.html" class="nav-list-link">Create first Audio Decoder Application</a></li><li class="nav-list-item "><a href="../../../source/middleware/pic32cmls60_secure_boot/readme.html" class="nav-list-link">Secure Boot on PIC32CM LS60 Curiosity Pro Evaluation Kit using MPLAB® Harmony v3</a></li><li class="nav-list-item "><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="../../../source/middleware/sdcard_audio_player_reader_tutorial/readme.html" class="nav-list-link">SD Card Audio Player Reader Tutorial</a><ul class="nav-list"><li class="nav-list-item "> <a href="../../../source/middleware/sdcard_audio_player_reader_tutorial/audio_tone_using_a_lookup_table/readme.html" class="nav-list-link">Audio Tone using a lookup table</a> </li><li class="nav-list-item "> <a href="../../../source/middleware/sdcard_audio_player_reader_tutorial/audio_tone_using_text_file_in_sd_card/readme.html" class="nav-list-link">Audio Tone using text fil in SD card</a> </li><li class="nav-list-item "> <a href="../../../source/middleware/sdcard_audio_player_reader_tutorial/sd_card_reader_to_load_audio_files/readme.html" class="nav-list-link">SD card Reader to load Audio Files</a> </li><li class="nav-list-item "> <a href="../../../source/middleware/sdcard_audio_player_reader_tutorial/play_wav_audio_file_from_sd_card/readme.html" class="nav-list-link">Play WAV Audio File from SD Card</a> </li><li class="nav-list-item "> <a href="../../../source/middleware/sdcard_audio_player_reader_tutorial/display_graphics_to_select_and_play_audio_file/readme.html" class="nav-list-link">Display Graphics to Select and Play Audio File</a> </li></ul></li><li class="nav-list-item "><a href="../../../source/middleware/quickstart_prebuilt_graphics_applications/readme.html" class="nav-list-link">Quickstart Prebuilt Graphics Applications</a></li><li class="nav-list-item "><a href="../../../source/middleware/creating_a_new_graphics_application/readme.html" class="nav-list-link">Creating a new Graphics Application</a></li><li class="nav-list-item "><a href="../../../source/middleware/graphics_quick_start_application_guides/readme.html" class="nav-list-link">Graphics Quick Start Application Guides</a></li><li class="nav-list-item "><a href="../../../source/middleware/harmony_graphics_suite_user_guide/readme.html" class="nav-list-link">Harmony Graphics Suite User Guide</a></li><li class="nav-list-item "><a href="../../../source/middleware/harmony_qtouch_user_guide/readme.html" class="nav-list-link">Harmony QTouch User Guide</a></li><li class="nav-list-item "><a href="../../../source/middleware/harmony_tcpip_user_guide/readme.html" class="nav-list-link">Harmony TCP/IP User Guide</a></li><li class="nav-list-item "><a href="../../../source/middleware/ftp_harmony_tcpip/readme.html" class="nav-list-link">File Transfer Protocol Using MPLAB Harmony v3 TCP/IP Stack for SAM E54 MCU</a></li><li class="nav-list-item "><a href="../../../source/middleware/harmony_usb_stack_user_guide/readme.html" class="nav-list-link">Harmony USB Stack User Guide</a></li><li class="nav-list-item "><a href="../../../source/middleware/create_a_touch_project/readme.html" class="nav-list-link">Create a Touch Project</a></li><li class="nav-list-item "><a href="../../../source/middleware/create_touch_surface_gesture_project/readme.html" class="nav-list-link">Create Touch Surface and Gesture Project</a></li><li class="nav-list-item "><a href="../../../source/middleware/harmony_crypto_overview/readme.html" class="nav-list-link">Harmony Crypto Overview</a></li><li class="nav-list-item "><a href="../../../source/middleware/create_first_winc_bypass_mode_example/readme.html" class="nav-list-link">Create Your First WINC Bypass Mode Example</a></li><li class="nav-list-item "><a href="../../../source/middleware/harmony_winc_driver_architecture/readme.html" class="nav-list-link">Harmony WINC Driver Architecture</a></li><li class="nav-list-item "><a href="../../../source/middleware/create_first_bluetooth_application/readme.html" class="nav-list-link">Create first Bluetooth Application</a></li><li class="nav-list-item "><a href="../../../source/middleware/create_first_motor_control_application/readme.html" class="nav-list-link">Create first Motor Control Application</a></li><li class="nav-list-item "><a href="../../../source/middleware/create_first_tcpip_application/readme.html" class="nav-list-link">Create first TCPIP Application</a></li><li class="nav-list-item "><a href="../../../source/middleware/create_first_usb_device_application/readme.html" class="nav-list-link">Create first USB device application</a></li><li class="nav-list-item "><a href="../../../source/middleware/create_first_usb_host_application/readme.html" class="nav-list-link">Create first USB Host application</a></li></ul></li><li class="nav-list-item"><a href="../../../release_notes.html" class="nav-list-link">Release notes</a></li><li class="nav-list-item"><a href="../../../mplab_harmony_license.html" class="nav-list-link">License</a></li></ul> </nav> <footer class="site-footer"> This site uses <a href="https://github.com/pmarsceill/just-the-docs">Just the Docs</a>, a documentation theme for Jekyll. </footer> </div> <div class="main" id="top"> <div id="main-header" class="main-header"> <div class="search"> <div class="search-input-wrap"> <input type="text" id="search-input" class="search-input" tabindex="0" placeholder="Search Microchip MPLAB Harmony Quick Documentation help" aria-label="Search Microchip MPLAB Harmony Quick Documentation help" autocomplete="off"> <label for="search-input" class="search-label"><svg viewBox="0 0 24 24" class="search-icon"><use xlink:href="#svg-search"></use></svg></label> </div> <div id="search-results" class="search-results"></div> </div> <nav aria-label="Auxiliary" class="aux-nav"> <ul class="aux-nav-list"> <li class="aux-nav-list-item"> <a href="https://support.microchip.com" class="site-button" > Obtain Support from Microchip </a> </li> </ul> </nav> </div> <div id="main-content-wrap" class="main-content-wrap"> <nav aria-label="Breadcrumb" class="breadcrumb-nav"> <ol class="breadcrumb-nav-list"> <li class="breadcrumb-nav-list-item"><a href="../../../source/basic/readme.html">Harmony Basics</a></li> <li class="breadcrumb-nav-list-item"><span>SAMA7G54 Configure First Stage Bootloader</span></li> </ol> </nav> <div id="main-content" class="main-content" role="main"> <p>                                                                                                     <a href="../../../index.html"><img src="../../r_images/quick_home.png" title="Home" /></a> <a href="../readme.html"><img src="../../r_images/quick_back.png" title="Back" /></a></p> <h3 id="note"> <a href="#note" aria-labelledby="note" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Note: </h3> <p><span style="color:blue"> <strong>This guide will explain how to configure first stage bootloader for SAMA7G54 family of microprocessors.</strong></span></p> <ul> <li><a href="https://www.microchip.com/en-us/product/SAMA7G54">SAMA7G54 data sheet</a></li> <li><a href="https://www.microchip.com/en-us/development-tool/EV21H18A">SAMA7G54 Evaluation kit </a></li> </ul> <h1 id="introduction"> <a href="#introduction" aria-labelledby="introduction" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Introduction </h1> <p>This document guides the user on how to configure boot configuration packet for first stage bootloader and how to ensure a valid code is available in second stage bootloader.</p> <p>The first stage bootloader (ROM code or Boot ROM or NVM bootloader) is a small piece of mask code, executed on power-on or reset. The first stage bootloader is responsible for loading the second-stage bootloader (User Application) from an external NVM into internal SRAM and execute it (Harmony uses the at91Bootstrap as its second stage boot loader).</p> <h1 id="first-stage-bootloader---boot-sequence"> <a href="#first-stage-bootloader---boot-sequence" aria-labelledby="first-stage-bootloader---boot-sequence" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> First stage bootloader - Boot Sequence </h1> <ul> <li>The boot sequence is an ordered list of embedded memory controllers from which the ROM code tries to boot. User can modify the boot sequence by writing a valid Boot Configuration packet into the OTPC (One Time Programmable Memory controller) or Emulated OTPC (One Time Programmable Memory controller).</li> <li>When no Boot Configuration Packet is available, ROM code will try to boot from one of the external NVMs in the following order: <ul> <li><strong>SDMMC1 IOSET1</strong></li> </ul> </li> </ul> <p>If no bootable file or no valid boot code is found in memory, the ROM code goes to the SAM-BA monitor.</p> <h1 id="first-stage-bootloader--boot-flow-process"> <a href="#first-stage-bootloader--boot-flow-process" aria-labelledby="first-stage-bootloader--boot-flow-process" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> First stage bootloader- Boot flow process </h1> <ul> <li> <p>The ROM code boot flow process is shown below: <img src="images/Boot_Process.png" align="middle" /></p> </li> <li> <p>The boot flow process is based on the values of the Boot Configuration Packet.</p> </li> <li> <p>By default, the value of the Boot Configuration Packet is 0x0.</p> </li> <li>When no Boot Configuration Packet is available in the OTP User area, the ROM code uses the following settings: <ul> <li>FLEXCOM3 IOSET 5 is used as a console.</li> <li>Boot from SDMMC1 IOSET1 (uses card detect pin).</li> </ul> </li> <li>If no valid code is found in the SD Card or e.MMC, the ROM code goes to the standard monitor.</li> </ul> <h1 id="configure-first-stage-bootloader"> <a href="#configure-first-stage-bootloader" aria-labelledby="configure-first-stage-bootloader" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Configure First stage bootloader </h1> <ul> <li> <p>User can write the boot configuration packet either into the OTP matrix or emulation SRAM by setting emulation bit in the boot sequence controller configuration register (BSC_CR).</p> </li> <li> <p>Boot configuration loading step is explained in the below flowchart: <img src="images/BCP.png" align="middle" /></p> </li> <li>Using boot configuration packet, user can: <ul> <li><strong>Modify the boot sequence steps by enabling only the user preferred NVMs as below:</strong><br /> <strong>1. QSPI</strong> <br /> <strong>2. e.MMC</strong> &lt;/b&gt; <br /> <strong>3. SDCARD</strong> &lt;/b&gt; <br /></li> <li><strong>Configure the console serial communications.</strong></li> <li><strong>Disable SAM-BA Monitor.</strong></li> </ul> </li> <li> <p>User can write boot sequence controller configuration register (BSC_CR) and the boot configuration packet into OTPC or OTPC Emulated SRAM using <strong>SAM-BA</strong> tool.</p> </li> <li> <p><a href="https://developerhelp.microchip.com/xwiki/bin/view/software-tools/32-bit-isp/host-application-program/">Go to this link to download and configure SAM-BA.</a></p> </li> <li><a href="../../source/basic/sama7g54_samba_installation_setup/readme.html">Refer this document to install and setup SAM-BA.</a></li> </ul> <p><strong>Note:</strong></p> <ul> <li><strong>Boot configuration using Emulation SRAM must be set every power cycle. Boot configuration using OTPC is one time.</strong><br /></li> <li><strong>It is recommended to write boot configuration packet (BCP) into Emulation SRAM in development phase and to OTPC (One Time Programmable Memory Controller) in the production phase.</strong></li> </ul> <p><strong>WARNING: once any user area packet has been programmed into the OTP matrix (OTPC), the emulation mode can never be enabled again. Be careful before writing a packet in the OTPC matrix !</strong></p> <h2 id="1-configure-first-stage-bootloader-to-boot-from-qspi-flash-memory"> <a href="#1-configure-first-stage-bootloader-to-boot-from-qspi-flash-memory" aria-labelledby="1-configure-first-stage-bootloader-to-boot-from-qspi-flash-memory" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 1. Configure First Stage Bootloader To Boot From QSPI Flash Memory </h2> <p>Use the below SAM-BA commands to configure the first stage bootloader to load the at91bootstrap from QSPI flash memory into SRAM and execute from SRAM. To learn about the boot process and first stage boot configuration, refer to section 19-Boot Strategies of the SAMA7G5 series data sheet. <br /> Note: <strong><em>It is mandatory to enable boot configuration packet to boot from QSPI for SAMA7G5 series.</em></strong></p> <p><strong>Steps to program Boot Configuration packet into Emulation SRAM:</strong></p> <ul> <li>Enable Emulation <br /> <strong><em>sam-ba -p j-link -b sama7g5-ek -a bootconfig -c writecfg:bscr:EMULATION_ENABLED</em></strong></li> <li>Read bscr and verify emulation is enabled <br /> <strong><em>sam-ba -p j-link -b sama7g5-ek -a bootconfig -c readcfg:bscr</em></strong></li> <li>Emulation SRAM Reset <br /> <strong><em>sam-ba -p j-link -b sama7g5-ek -a bootconfig -c resetemul</em></strong></li> <li>Refresh Emulation SRAM <br /> <strong><em>sam-ba -p j-link -b sama7g5-ek -a bootconfig -c refreshcfg:emul</em></strong></li> <li>Enable debug, QSPI0 as external NVM <br /> <strong><em>sam-ba -p j-link -b sama7g5-ek -a bootconfig -c writecfg:bcp-emul:DBGU,QSPI0_IOSET1</em></strong></li> <li>Read bcp_emul and verify whether QSPI is set as external NVM <br /> <strong><em>sam-ba -p j-link -b sama7g5-ek -a bootconfig -c readcfg:bcp-emul</em></strong> <img src="images/step1.png" align="middle" /> <br /> Now reset the board by pressing reset(nRST) button. <br /></li> </ul> <p><strong>Steps to program Boot Configuration packet into OTPC:</strong></p> <ul> <li>Disable Emulation <br /> <strong><em>sam-ba -p j-link -b sama7g5-ek -a bootconfig -c writecfg:bscr:EMULATION_DISABLED</em></strong></li> <li>Read bscr and verify emulation is disabled <br /> <strong><em>sam-ba -p j-link -b sama7g5-ek -a bootconfig -c readcfg:bscr</em></strong></li> <li>Refresh otp <br /> <strong><em>sam-ba -p j-link -b sama7g5-ek -a bootconfig -c refreshcfg:otp</em></strong></li> <li>Enable debug, QSPI0 as external NVM <br /> <strong><em>sam-ba -p j-link -b sama7g5-ek -a bootconfig -c writecfg:bcp-otp:DBGU,QSPI0_IOSET1</em></strong></li> <li>Read bcp_otp and verify whether QSPI is set as external NVM <br /> <strong><em>sam-ba -p j-link -b sama7g5-ek -a bootconfig -c readcfg:bcp-otp</em></strong> <br />Now reset the board by pressing the reset(nRST) button.</li> </ul> <h2 id="2-configure-first-stage-bootloader-to-boot-from-emmc-flash-memory"> <a href="#2-configure-first-stage-bootloader-to-boot-from-emmc-flash-memory" aria-labelledby="2-configure-first-stage-bootloader-to-boot-from-emmc-flash-memory" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 2. Configure First Stage Bootloader to Boot From e.MMC Flash Memory </h2> <p>Use the below SAM-BA commands to configure the first stage bootloader to load the at91bootstrap from e.MMC flash memory into SRAM and execute from SRAM. To learn about the boot process and first stage boot configuration, refer to section 19-Boot Strategies of the SAMA7G5 series data sheet. <br /> Note: <strong><em>It is mandatory to enable boot configuration packet to boot from e.MMC for SAMA7G5 series.</em></strong></p> <p><strong>Steps to program Boot Configuration packet into Emulation SRAM:</strong></p> <ul> <li>Enable Emulation <br /> <strong><em>sam-ba -p j-link -b sama7g5-ek -a bootconfig -c writecfg:bscr:EMULATION_ENABLED</em></strong></li> <li>Read bscr and verify emulation is enabled <br /> <strong><em>sam-ba -p j-link -b sama7g5-ek -a bootconfig -c readcfg:bscr</em></strong></li> <li>Emulation SRAM Reset <br /> <strong><em>sam-ba -p j-link -b sama7g5-ek -a bootconfig -c resetemul</em></strong></li> <li>Refresh Emulation SRAM <br /> <strong><em>sam-ba -p j-link -b sama7g5-ek -a bootconfig -c refreshcfg:emul</em></strong></li> <li>Enable debug, SDMMC0 as external NVM <br /> <strong><em>sam-ba -p j-link -b sama7g5-ek -a bootconfig -c writecfg:bcp-emul:DBGU,SDMMC0_IOSET1</em></strong></li> <li>Read bcp_emul and verify whether SDMMC0 is set as external NVM <br /> <strong><em>sam-ba -p j-link -b sama7g5-ek -a bootconfig -c readcfg:bcp-emul</em></strong> <img src="images/step2.png" align="middle" /> <br /> Now reset the board by pressing reset(nRST) button. <br /></li> </ul> <p><strong>Steps to program Boot Configuration packet into OTPC:</strong></p> <ul> <li>Disable Emulation <br /> <strong><em>sam-ba -p j-link -b sama7g5-ek -a bootconfig -c writecfg:bscr:EMULATION_DISABLED</em></strong></li> <li>Read bscr and verify emulation is disabled <br /> <strong><em>sam-ba -p j-link -b sama7g5-ek -a bootconfig -c readcfg:bscr</em></strong></li> <li>Refresh otp <br /> <strong><em>sam-ba -p j-link -b sama7g5-ek -a bootconfig -c refreshcfg:otp</em></strong></li> <li>Enable debug, SDMMC0 as external NVM <br /> <strong><em>sam-ba -p j-link -b sama7g5-ek -a bootconfig -c writecfg:bcp-otp:DBGU,SDMMC0_IOSET1</em></strong></li> <li>Read bcp_otp and verify whether SDMMC0 is set as external NVM <br /> <strong><em>sam-ba -p j-link -b sama7g5-ek -a bootconfig -c readcfg:bcp-otp</em></strong> <br />Now reset the board by pressing the reset(nRST) button.</li> </ul> <h2 id="3-configure-first-stage-bootloader-to-boot-from-sdcard-memory"> <a href="#3-configure-first-stage-bootloader-to-boot-from-sdcard-memory" aria-labelledby="3-configure-first-stage-bootloader-to-boot-from-sdcard-memory" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 3. Configure First Stage Bootloader to Boot From SDCARD Memory </h2> <p>Use the below SAM-BA commands to configure the first stage bootloader to load the at91bootstrap from SDCARD memory into SRAM and execute from SRAM. To learn about the boot process and first stage boot configuration, refer section 19-Boot Strategies of the SAMA7G5 series data sheet. <br /> Note: <strong><em>By default boot from SDCARD will be enabled in boot configuration packet for SAMA7G5 series.</em></strong></p> <p><strong>Steps to program Boot Configuration packet into Emulation SRAM:</strong></p> <ul> <li>Enable Emulation <br /> <strong><em>sam-ba -p j-link -b sama7g5-ek -a bootconfig -c writecfg:bscr:EMULATION_ENABLED</em></strong></li> <li>Read bscr and verify emulation is enabled <br /> <strong><em>sam-ba -p j-link -b sama7g5-ek -a bootconfig -c readcfg:bscr</em></strong></li> <li>Emulation SRAM Reset <br /> <strong><em>sam-ba -p j-link -b sama7g5-ek -a bootconfig -c resetemul</em></strong></li> <li>Refresh Emulation SRAM <br /> <strong><em>sam-ba -p j-link -b sama7g5-ek -a bootconfig -c refreshcfg:emul</em></strong></li> <li>Enable debug, SDMMC1 as external NVM <br /> <strong><em>sam-ba -p j-link -b sama7g5-ek -a bootconfig -c writecfg:bcp-emul:DBGU,SDMMC1_IOSET1</em></strong></li> <li>Read bcp_emul and verify whether SDMMC1 is set as external NVM <br /> <strong><em>sam-ba -p j-link -b sama7g5-ek -a bootconfig -c readcfg:bcp-emul</em></strong> <img src="images/step3.png" align="middle" /> <br /> Now reset the board by pressing reset(nRST) button. <br /></li> </ul> <p><strong>Steps to program Boot Configuration packet into OTPC:</strong></p> <ul> <li>Disable Emulation <br /> <strong><em>sam-ba -p j-link -b sama7g5-ek -a bootconfig -c writecfg:bscr:EMULATION_DISABLED</em></strong></li> <li>Read bscr and verify emulation is disabled <br /> <strong><em>sam-ba -p j-link -b sama7g5-ek -a bootconfig -c readcfg:bscr</em></strong></li> <li>Refresh otp <br /> <strong><em>sam-ba -p j-link -b sama7g5-ek -a bootconfig -c refreshcfg:otp</em></strong></li> <li>Enable debug, SDMMC1 as external NVM <br /> <strong><em>sam-ba -p j-link -b sama7g5-ek -a bootconfig -c writecfg:bcp-otp:DBGU,SDMMC1_IOSET1</em></strong></li> <li>Read bcp_otp and verify whether SDMMC1 is set as external NVM <br /> <strong><em>sam-ba -p j-link -b sama7g5-ek -a bootconfig -c readcfg:bcp-otp</em></strong> <br />Now reset the board by pressing the reset(nRST) button.</li> </ul> <h2 id="4-sam-ba-command-to-invalidate-the-boot-configuration-packet"> <a href="#4-sam-ba-command-to-invalidate-the-boot-configuration-packet" aria-labelledby="4-sam-ba-command-to-invalidate-the-boot-configuration-packet" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 4. SAM-BA command to invalidate the Boot Configuration packet.<br /> </h2> <p>Use below command to remove last set configuration in boot configuration packet.<br /></p> <ul> <li>To invalidate bcp-emul.<br /> <strong><em>sam-ba -p j-link -b sama7g5-ek -a bootconfig -c invalidatecfg:bcp-emul</em></strong> <br /></li> <li>To invalidate bcp-otp.<br /> <strong><em>sam-ba -p j-link -b sama7g5-ek -a bootconfig -c invalidatecfg:bcp-otp</em></strong></li> </ul> <h1 id="how-first-stage-bootloader-ensures-the-presence-of-valid-second-stage-bootloader"> <a href="#how-first-stage-bootloader-ensures-the-presence-of-valid-second-stage-bootloader" aria-labelledby="how-first-stage-bootloader-ensures-the-presence-of-valid-second-stage-bootloader" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> How first stage bootloader ensures the presence of valid second stage bootloader </h1> <ul> <li> <p>The Boot ROM reads and analyzes the first 28 bytes corresponding to the first seven ARM exception vectors of second Stage bootloader (at91bootstrap) to decide whether the AT91bootstrap can be considered as valid, or it should be skipped.</p> </li> <li> <p>Except for the sixth vector, other exception vector bytes must implement the ARM instructions for either branch or load PC with PC-relative addressing. The ROM code fetches the 6th exception vector value to know exactly how many bytes it should transfer from the external NVM instead of reading the maximum size allowed to the user application, hence speeding up the boot process.</p> </li> <li> <p>If the external NVM chosen is SDCard/e.MMC, then BootROM looks for boot.bin file in the FAT formatted SDCard/e.MMC in addition to the ARM-exception vectors check.</p> </li> <li> <p>The at91bootstrap code ensures the presence of the valid code by having the proper exception vector. <a href="https://github.com/linux4sam/at91bootstrap/blob/master/crt0_gnu.S">It can be seen in crt0_gnu.s file in at91bootstrap source code.</a></p> </li> </ul> <p><img src="images/Exception_Vectors.png" align="middle" /></p> <h2 id="reference-links"> <a href="#reference-links" aria-labelledby="reference-links" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Reference Links </h2> <p><a href=""><a href="https://www.microchip.com/design-centers/32-bit" target="_blank"> <img src="../../r_images/32_bit_mcus.png" /> </a></a>       <a href=""><a href="https://www.microchip.com/design-centers/32-bit-mpus" target="_blank"> <img src="../../r_images/32_bit_mpus.png" /> </a></a>       <a href=""><a href="https://www.microchip.com/mplab/mplab-x-ide" target="_blank"> <img src="../../r_images/mplab_x_ide.png" /> </a></a>     <a href=""><a href="https://www.microchip.com/mplab/mplab-harmony" target="_blank"> <img src="../../r_images/mplab_harmony.png" /> </a></a> <a href=""><a href="https://www.microchip.com/mplab/compilers" target="_blank"> <img src="../../r_images/mplab_compiler.png" /> </a></a> <a href=""><a href="https://www.microchip.com/en-us/tools-resources/configure/mplab-code-configurator" target="_blank"> <img src="../../r_images/mcc_harmony.png" /> </a></a></p> <hr> <footer> <p class="text-small text-grey-dk-000 mb-0"><img src='https://raw.githubusercontent.com/wiki/Microchip-MPLAB-Harmony/Microchip-MPLAB-Harmony.github.io/images/microchip_logo.png' /><br />Copyright &copy; 2020 Microchip Technology.</p> <!-- <p class="text-small text-grey-dk-000 mb-0"><img src='../../../assets/images/vendor/microchip_logo.png' /><br /> Copyright &copy; 2024 Microchip Technology.</p> --> </footer> </div> </div> <div class="search-overlay"></div> </div> </body> </html>
